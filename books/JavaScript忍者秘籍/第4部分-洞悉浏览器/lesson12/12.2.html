<!DOCTYPE html><html lang="en"><head>  <meta charset="UTF-8">  <title>Title</title></head><body><div id="container"></div><script>  const util = {    convert(html) {      const tags = /^(area|base|br|col|hr)$/i      return html.replace(/(<(\w+)[^>]*?)\/>/g, (all, front, tag) => {        return tags.test(tag) ? all          : `${front}></${tag}>`      })    },    getNodes(htmlString, doc, fragment) {      const map = {        '<td': [3, '<table><tbody><tr>', '</tr></tbody></table>'],        '<option': [1, '<select multiple>', '</select>']      }      const tagName = htmlString.match(/<\w+/)      let mapEntry = tagName ? map[tagName[0]] : null      if (!mapEntry) {        mapEntry = [0, '', '']      }      let div = (doc || document).createElement('div')      div.innerHTML = mapEntry[1] + htmlString + mapEntry[2]      while (mapEntry[0]--) {        div = div.lastChild      }      if (fragment) {        while (div.firstChild) {          fragment.appendChild(div.firstChild)        }      }      return div.childNodes    },    insert(elems, args, callback) {      if (elems.length) {        const doc = elems[0].ownerDocument || elems[0]        const fragment = doc.createDocumentFragment()        const scripts = this.getNodes(args, doc, fragment)        console.log(scripts)        console.log(fragment)        console.log(doc)      }    }  }  const $ = (function () {    let $el = null    const proto = {      append(html) {        const convertRet = util.convert(html.trim())        const notes = util.getNodes(convertRet, $el)        console.log(notes)      }    }    return function (el) {      $el = el      return proto    }  })()  const container = document.getElementById('container')  $(document).append(`    <option>Yoshi</option>    <option>Kuma</option>    <table />  `)</script></body></html>